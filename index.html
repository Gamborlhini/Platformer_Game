<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title>Platformer Game</title>
</head>
<body>
<canvas id=canvas width=1000 height=500 style="border:1px solid #000">
</canvas>
<script>
  var canvas;
  var ctx;
  var dx=5;
  var dy=40;
  var x=15;
  var y=15;
  var x2=15;
  var y2=15;
  var l=0.5;
  var p=30;
  var something=0;
  var z=0.75;
  var r=5;
  var t=0.3;
  var v=0.2;
  var xx=1;
  var yy=1;
  var yyy=1;
  var yyyy=1;
  var b=1000;
  var orbSpeed=0;
  var lifeTotal=3;
  var enemyLifeTotal=3;
  var pd=0.1;
  var direction=0;
  var gravity=1;
  var score=0;
  var WIDTH=1500;
  var HEIGHT=1500;
  var speedSide=0;
  var speedUp=0;
  var destroy=false;
  var jumpNumber=1;
  var movable=false;
  var starting=false;
   var collision=false;
   var collision2=false;
  var collision3=false;
  var collision4=false;
  var collision5=false;
  var collision6=false;
  var collision7=false;
  var collision8=false;
  var collision9=false;
  var collision10=false;
  var collision11=false;
  var collision12=false;
  var collision13=false;
  var collision14=false;
  var collision15=false;
  var collision16=false;
  var collision17=false;
  var collision18=false;
  var collision19=false;
  var collision20=false;
  var collision21=false;
  var collision22=false;
  var collision23=false;
  var collision24=false;
  var collision25=false;
  var collision26=false;
  var collision27=false;
  var collision28=false;
  var collision29=false;
  var collision30=false;
  var collision31=false;
  var collision32=false;
  var collision33=false;
  var collision34=false;
  var collision35=false;
	var background={height:1500,width:1500,x:0,y:0,color:"green"};
  var object={height:5,width:360,x:0,y:200,color:"black"};
  var object2={height:2000, width:600, x:-5,y:-2000,color:"black"};
  var object3={height:10,width:100,x:160,y:190,color:"grey"};
  var object5={height:10,width:90,x:170,y:180,color:"grey"};
  var object6={height:10,width:80,x:180,y:170,color:"grey"};
  var object7={height:10,width:70,x:190,y:160,color:"grey"};
  var object8={height:10,width:60,x:200,y:150,color:"grey"};
  var object9={height:10,width:50,x:210,y:140,color:"grey"};
  var object10={height:10,width:40,x:220,y:130,color:"grey"};
  var object11={height:10,width:1000,x:-50,y:350,color:"black"};
  var object12={height:65,width:10,x:260,y:135,color:"purple"};
  var object13={height:55,width:10,x:350,y:80,color:"puple"};
  var object16={height:2,width:40,x:220,y:128,color:"black"};
  var object17={height:30,width:30,x:320,y:170,color:"green"};
  var object4={height:5,width:140,x:220,y:130,color:"black"};
  var bottom={height:10,width:1000,x:0,y:500,color:"black"};
  var player = [{height:20,width:20,x:x+5,y:y+5,color:"blue"},
  ];
  var orb={height:4,width:4,x:x+24,y:y+24,color:"pink"};
  var orb2={height:4,width:4,x:x+32,y:y+24,color:"pink"};
  var bubble={height:5,width:5,x:x+28,y:y+23,color:"purple"};
  var enemy={height:20,width:20,x:270,y:110,color:"red"};
  var wall1={height:20,width:5,x:220,y:110,color:"blue"};
  var loadingscreen=[{height:1000,width:1000,x:-15,y:-15,color:"purple"},
                     {height:35,width:10,x:50,y:50,color:"yellow"},
                     {height:10,width:20,x:55,y:45},
                     {height:20,width:10,x:70,y:50},
                     {height:10,width:20,x:55,y:65},
                     {height:40,width:10,x:90,y:45},
                     {height:10,width:15,x:95,y:50},
                     {height:10,width:15,x:105,y:45},
                     {height:10,width:10,x:115,y:50},
                     {height:30,width:10,x:130,y:50},
                     {height:10,width:15,x:135,y:45},
                     {height:10,width:10,x:145,y:50},
                     {height:10,width:15,x:140,y:60},
                     {height:10,width:20,x:135,y:75},
                     {height:10,width:20,x:170,y:45},
                     {height:15,width:10,x:165,y:50},
                     {height:10,width:15,x:170,y:60},
                     {height:15,width:10,x:180,y:65},
                     {height:10,width:20,x:165,y:75},
                     {height:10,width:20,x:205,y:45},
                     {height:15,width:10,x:200,y:50},
                     {height:10,width:15,x:205,y:60},
                     {height:15,width:10,x:215,y:65},
                     {height:10,width:20,x:200,y:75},
                     {height:40,width:10,x:250,y:45},
                     {height:10,width:20,x:250,y:75}
  ];
  function RenderPlayer(){
	for(j=0;j<player.length;j++)
	{ctx.fillStyle=player[j].color;ctx.fillRect(x+player[j].x,y+player[j].y,player[j].width,player[j].height)
	}
  }
  function RenderLoadingscreen(){
	for(j=0;j<loadingscreen.length;j++)
	{ctx.fillStyle=loadingscreen[j].color;ctx.fillRect(x2+loadingscreen[j].x,y2+loadingscreen[j].y,loadingscreen[j].width,loadingscreen[j].height)
	}
  }
  function CollisionDetection(b,a){
	collision=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision=true
  	}
   return collision;
  }
  function CollisionDetection2(b,a){
	collision2=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision2=true
  	}
   return collision2;
  }
  function CollisionDetection3(b,a){
	collision3=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision3=true
  	}
   return collision3;
  }
  function CollisionDetection4(b,a){
	collision4=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision4=true
  	}
   return collision4;
  }
  function CollisionDetection5(b,a){
	collision5=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision5=true
  	}
   return collision5;
  }
  function CollisionDetection6(b,a){
	collision6=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision6=true
  	}
   return collision6;
  }
  function CollisionDetection7(b,a){
	collision7=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision7=true
  	}
   return collision7;
  }
  function CollisionDetection8(b,a){
	collision8=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision8=true
  	}
   return collision8;
  }
  function CollisionDetection9(b,a){
	collision9=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision9=true
  	}
   return collision9;
  }
  function CollisionDetection10(b,a){
	collision10=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision10=true
  	}
   return collision10;
  }
  function CollisionDetection11(b,a){
	collision11=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision11=true
  	}
   return collision11;
  }
  function CollisionDetection12(b,a){
	collision12=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision12=true
  	}
   return collision12;
  }
  function CollisionDetection13(b,a){
	collision13=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision13=true
  	}
   return collision13;
  }
  function CollisionDetection14(b,a){
	collision14=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision14=true
  	}
	return collision14;
  }
  function CollisionDetection15(b,a){
	collision15=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision15=true
  	}
	return collision15;
  }
  function CollisionDetection16(b,a){
	collision16=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision16=true
  	}
	return collision16;
  }
  function CollisionDetection17(b,a){
	collision17=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision17=true
  	}
	return collision17;
  }
  function CollisionDetection18(b,a){
	collision18=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision18=true
  	}
	return collision18;
  }
  function CollisionDetection19(b,a){
	collision19=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision19=true
  	}
	return collision19;
  }
  function CollisionDetection20(b,a){
	collision20=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision20=true
  	}
	return collision20;
  }
  function CollisionDetection21(b,a){
	collision21=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision21=true
  	}
	return collision21;
  }
  function CollisionDetection22(b,a){
	collision22=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision22=true
  	}
	return collision22;
  }
  function CollisionDetection23(b,a){
	collision23=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision23=true
  	}
	return collision23;
  }
  function CollisionDetection24(b,a){
	collision24=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision24=true
  	}
	return collision24;
  }
  function CollisionDetection25(b,a){
	collision25=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision25=true
  	}
	return collision25;
  }
  function CollisionDetection26(b,a){
	collision26=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision26=true
  	}
	return collision26;
  }
  function CollisionDetection27(b,a){
	collision27=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision27=true
  	}
	return collision27;
  }
  function CollisionDetection28(b,a){
	collision28=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision28=true
  	}
	return collision28;
  }
  function CollisionDetection29(b,a){
	collision29=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision29=true
  	}
	return collision29;
  }
  function CollisionDetection30(b,a){
	collision30=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision30=true
  	}
	return collision30;
  }
  function CollisionDetection31(b,a){
	collision31=false;
	if(x+20<a.x+a.width&&
  	y+20<a.y+a.height&&
  	b.height+y+20>a.y&&
  	x+20+b.width>a.x){
    	collision31=true
  	}
   return collision31;
  }
  function CollisionDetection32(b,a){
	collision32=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision32=true
  	}
	return collision32;
  }
  function CollisionDetection33(b,a){
	collision33=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision33=true
  	}
	return collision33;
  }
  function CollisionDetection34(b,a){
	collision34=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision34=true
  	}
	return collision34;
  }
  function CollisionDetection35(b,a){
	collision35=false;
	if(b.x<a.x+a.width&&
  	b.y<a.y+a.height&&
  	b.height+b.y>a.y&&
  	b.x+b.width>a.x){
    	collision35=true
  	}
	return collision35;
  }
  function clearscreen(){
	ctx.clearRect(0,0,WIDTH,HEIGHT)
  }
  function init(){
	canvas=document.getElementById("canvas");
	ctx=canvas.getContext("2d");
	return setInterval(draw,2)
  }
  function falling(){
  if(collision==false&&collision3==false){
	y+=z;
	orb.y+=z;
	orb2.y+=z;
	if(movable==false){
	bubble.y+=z;
  	}
	}
  if(collision30==false){
	enemy.y+=z;
  }
  }
  function doubleJump(){
	if(collision===true||collision3===true){
  	jumpNumber=0;
	}
  }
  function moveToSide(){
	x+=speedSide;
	orb.x+=speedSide;
	orb2.x+=speedSide;
	if(movable==false){
	bubble.x+=speedSide;
	}
  }
  function moveUp(){
	if(collision2===true||collision4===true||collision5===true||collision6===true||collision7===true||collision8===true||collision9===true){
  	speedUp-=1;
	}
	if(collision2===true||collision4===true||collision5===true||collision6===true||collision7===true||collision8===true||collision9===true){
  	y+=speedUp;
  	orb.y+=speedUp;
  	orb2.y+=speedUp;
  	if(movable==false){
  	bubble.y+=speedUp;
  	}
	}
	if(collision2==false&&collision4==false&&collision5==false&&collision6==false&&collision7==false&&collision8==false&&collision9==false){
  	speedUp=0;
	}
  }
  function shotDetect(){
	if(collision15===true||collision16===true||collision17===true||collision18===true||collision19===true||collision20===true||collision21===true||collision22===true||collision23===true||collision24===true||collision25===true||collision26===true||collision27===true||collision28===true||collision29===true||collision32===true){
  	something=0;
  	bubble.x=x+28;
  	bubble.y=y+23;
  	movable=false;
	}
  }
  function doKeyUp(a){
	switch(a.keyCode){
  	case 65:
    	speedSide=0;
  	case 68:
    	speedSide=0;
	}
  }
  function doKeyDown(a){
	switch(a.keyCode){
  	case 87:
    	if(/*jumpNumber<1*/collision===true||collision3===true||collision13===true){
    	y-=dy;
    	orb.y-=dy;
    	orb2.y-=dy;
    	if(movable==false){
    	bubble.y-=dy;
    	}
    	jumpNumber+=xx;
	}
    	break;
    case 76:
        y2+=1000;
        starting=true;
        break;
  	case 65:/*left*/
    	if(starting===true){
        speedSide=-0.5;
    	orb.x=x+20;
    	orb2.x=x+20;
    	direction=-1;
        }
    	break;
  	case 68:/*right*/
      	if(starting===true){
        speedSide=0.5;
      	orb.x=x+36;
      	orb2.x=x+36;
      	direction=1;
        }
    	break;
  	case 70:
    	if(movable==false){
       	if(direction===1){
      	something=1;
      	movable=true;
    	}
    	else if(direction===-1){
      	something=-1;
      	movable=true;
    	}
    	speedSide=0;
    	}
	}
  }
  function pushOff(){
	if(collision11===true){
  	x+=5;
  	orb.x+=5;
  	orb2.x+=5;
  	bubble.x+=5;
  	return destroy;
	}
  }
	function renderObjectmaster(a){
	ctx.fillStyle=a.color;
	ctx.fillRect(a.x,a.y,a.width,a.height)
	if(collision10===true){
  	x=10;
  	y=10;
  	speedSide=0;
	}
  }
  function lifeChanging(){
	if(collision10===true&&lifeTotal===3){
  	object19.x-=b;
  	orb.x-=b;
  	orb2.x-=b;
  	bubble.x-=b;
  	lifeTotal-=xx;
	}
	if(collision10===true&&lifeTotal===2){
  	object18.x-=b;
  	orb.x-=b;
  	orb2.x-=b;
  	bubble.x-=b;
  	lifeTotal-=xx;
	}
	if(collision10===true&&lifeTotal===1){
  	object17.x-=b;
  	orb.x-=b;
  	orb2.x-=b;
  	bubble.x-=b;
  	lifeTotal-=xx;
	}
  }
  function lifeChange(){
	if(collision10===true){
  	if(lifeTotal===3){
    	yy-=b;
  	}
  	if(lifeTotal===2){
    	yyy-=b;
  	}
  	if(lifeTotal===1){
    	yyyy-=b;
  	}
  	lifeTotal-=1;
	}
  }
	function renderBackground(){
	ctx.fillStyle="lawnGreen";
	ctx.fillRect(background.x,background.y,background.width,background.height)
  }
  function oneWayPortal(){
	if(collision12===true){
  	x=250;
  	orb.x=x+24;
  	orb2.x=x+32;
  	bubble.x=x+28;
  	something=0;
  	y=130;
  	orb.y=y+24;
  	orb2.y=y+24;
  	bubble.y=y+24;
  	movable=false;
  	speedSide=0;
  	x+=5;
  	orb.x+=5;
  	bubble.x+=5;
  	orb2.x+=5;
	}
  }
function draw(){
	if(collision10===true||collision31===true){
  	lifeTotal-=1;
	}
  bubble.x+=something;
  if(collision10===true||collision31===true){
	orb.y=33;
	orb.x=33;
	bubble.y=32;
	bubble.x=38;
	orb2.y=33;
	orb2.x=41;
	something=0;
	movable=false;
	x=9;
	y=9;
	speedSide=0;
  }
  if(collision30===true){
	enemy.x+=t;
  }
  if(collision33===true){
	t=-0.3;
  }
  if(collision34===true){
	t=0.3;
  }
  if(collision32===true){
	enemyLifeTotal-=1;
	enemy.y-=20;
	if(enemyLifeTotal===0){
  	enemy.y+=50;
	}
  }
	if(lifeTotal==0){
 	collision=false;
 	object11.x+=1000;
	}
	clearscreen();
	//lifeChanging();
	//lifeChange();
	//wall();
	oneWayPortal();
	falling();
	moveUp();
	pushOff();
	doubleJump();
	shotDetect();
	renderObjectmaster(object);
	renderObjectmaster(object3);
	renderObjectmaster(object4);
	renderObjectmaster(object5);
	renderObjectmaster(object6);
	renderObjectmaster(object7);
	renderObjectmaster(object8);
	renderObjectmaster(object9);
	renderObjectmaster(object10);
	renderObjectmaster(object12);
	renderObjectmaster(object13);
	if(enemyLifeTotal===3||enemyLifeTotal===2||enemyLifeTotal===1){renderObjectmaster(enemy);
  	}
	if(collision14==false){
    	renderObjectmaster(object17);
    }
    if(collision14===true&&collision35==false){
      object2.y+=z;
	speedSide=0;
	starting=false;
    }
	if(lifeTotal>0){
    if(movable===true){
    renderObjectmaster(bubble);
    }
    RenderPlayer();
    renderObjectmaster(orb);
	renderObjectmaster(orb2);
    }
    renderObjectmaster(object2);
    RenderLoadingscreen();
	CollisionDetection(player[0],object);
	CollisionDetection3(player[0],object4);
	CollisionDetection2(player[0],object3);
	CollisionDetection4(player[0],object5);
	CollisionDetection5(player[0],object6);
	CollisionDetection6(player[0],object7);
	CollisionDetection7(player[0],object8);
	CollisionDetection8(player[0],object9);
	CollisionDetection9(player[0],object10);
	CollisionDetection10(player[0],object11);
	CollisionDetection11(player[0],object12);
	CollisionDetection12(player[0],object13);
	CollisionDetection13(player[0],object16);
	CollisionDetection14(player[0],object17);
	CollisionDetection15(bubble,object13);
	CollisionDetection16(bubble,object);
	CollisionDetection17(bubble,object4);
	CollisionDetection18(bubble,object3);
	CollisionDetection19(bubble,object5);
	CollisionDetection20(bubble,object6);
	CollisionDetection21(bubble,object7);
	CollisionDetection22(bubble,object8);
	CollisionDetection23(bubble,object9);
	CollisionDetection24(bubble,object10);
	CollisionDetection25(bubble,object11);
	CollisionDetection26(bubble,object12);
	CollisionDetection27(bubble,object13);
	CollisionDetection28(bubble,object16);
	CollisionDetection29(bubble,object17);
	CollisionDetection30(enemy,object4);
	CollisionDetection31(player[0],enemy);
	CollisionDetection32(bubble,enemy);
	CollisionDetection33(enemy,object13);
	CollisionDetection34(enemy,wall1);
    CollisionDetection35(object2,bottom);
	moveToSide();
  }
init();
  window.addEventListener("keydown",doKeyDown,true);
  window.addEventListener("keyup",doKeyUp,true);
	</script>
</body>
</html>
